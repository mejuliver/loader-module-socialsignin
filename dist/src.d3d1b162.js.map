{"version":3,"sources":["src/index.js"],"names":["socialSignin","init","window","socialSignin_config","loadScript","console","log","src","c","s","r","t","document","createElement","type","onload","onreadystatechange","readyState","getElementsByTagName","parentNode","insertBefore","fbSigninInit","_self","querySelectorAll","forEach","item","addEventListener","event","preventDefault","FB","login","statusChangeCallback","scope","return_scopes","socialLogin","data","url","hasOwnProperty","fb","Object","assign","extend_data","google","http","XMLHttpRequest","params","key","split","pop","join","open","setRequestHeader","status","result","responseText","send","response","api","id","fullname","first_name","last_name","email","avatar","checkLoginState","getLoginStatus","googleUser","gstart","auth2","gapi","load","client_id","cookiepolicy","index","attachClickHandler","name","getBasicProfile","getName","getId","length","getEmail","error","JSON","stringify","undefined","fbAsyncInit","version","appId","cookie","xfbml"],"mappings":"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","file":"src.d3d1b162.js","sourceRoot":"..","sourcesContent":["let socialSignin = {\r\n\tinit(){\r\n\t\tconst _self = this;\r\n\r\n\t\tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\tif( !( 'fb' in window.socialSignin_config) ){\r\n\t\t\t\tconsole.log('FB config not defined');\r\n\t\t\t\treturn;\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadScript('https://connect.facebook.net/en_US/sdk.js',function(){});\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\tif( !( 'google' in window.socialSignin_config) ){\r\n\t\t\t\tconsole.log('Google config not defined');\r\n\t\t\t\treturn;\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadScript('https://apis.google.com/js/platform.js?onload=gstart',function(){});\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn;\r\n\t\t}\r\n\t},\r\n\tloadScript(src,c){\r\n\t  var s,\r\n\t      r,\r\n\t      t;\r\n\t  r = false;\r\n\t  s = document.createElement('script');\r\n\t  s.type = 'text/javascript';\r\n\t  s.src = src;\r\n\t  s.onload = s.onreadystatechange = function() {\r\n\t    //console.log( this.readyState ); //uncomment this line to see which ready states are called.\r\n\t    if ( !r && (!this.readyState || this.readyState == 'complete') )\r\n\t    {\r\n\t      r = true;\r\n\t      c;\r\n\t    }\r\n\t  };\r\n\t  t = document.getElementsByTagName('script')[0];\r\n\t  t.parentNode.insertBefore(s, t);\r\n\t},\r\n\tfbSigninInit(){\r\n\t\tconst _self = this;\r\n\r\n\t\tdocument.querySelectorAll('.socialSignin[data-type=\"fb\"]').forEach( function( item ) {\r\n\t\t\titem.addEventListener('click',function(){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tFB.login(_self.statusChangeCallback, {scope: 'email,public_profile', return_scopes: true});\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\tsocialLogin(data){\r\n\t\tconst _self = this;\r\n\r\n\t\tlet url = ''\r\n\r\n\t\tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\tif( data.type == 'fb' ){\r\n\t\t\t\tif( window.socialSignin_config.hasOwnProperty('fb') ){\r\n\t\t\t\t\tif( window.socialSignin_config.fb.hasOwnProperty('extend_data') ){\r\n\t\t\t\t\t\tObject.assign(data,window.socialSignin_config.fb.extend_data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( window.socialSignin_config.fb.hasOwnProperty('url') ){\r\n\t\t\t\t\t\turl = window.socialSignin_config.fb.url;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\t\t\t\t\tif( window.socialSignin_config.hasOwnProperty('console') && window.socialSignin_config.console == 1 ){\r\n\t\t\t\t\t\t\t\tconsole.log('Facebook url not defined');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(data.type === 'google'){\r\n\t\t\t\tif( window.socialSignin_config.hasOwnProperty('google') ){\r\n\t\t\t\t\tif( window.socialSignin_config.google.hasOwnProperty('extend_data') ){\r\n\t\t\t\t\t\tObject.assign(data,window.socialSignin_config.google.extend_data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( window.socialSignin_config.google.hasOwnProperty('url') ){\r\n\t\t\t\t\t\turl = window.socialSignin_config.google.url;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\t\t\t\t\tif( window.socialSignin_config.hasOwnProperty('console') && window.socialSignin_config.console == 1 ){\r\n\t\t\t\t\t\t\t\tconsole.log('Google url not defined');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar http = new XMLHttpRequest();\r\n\t\tlet params = '';\r\n\r\n\t\tfor (var key in data) {\r\n\t\t    if (data.hasOwnProperty(key)) {\r\n\t\t    \tparams+=key+'='+data[key]+'&';\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\tparams = params.split('&');\r\n\r\n\t\tparams.pop()\r\n\r\n\t\tparams = params.join('&');\r\n        \r\n        http.open('POST', url, true);\r\n        \r\n        //Send the proper header information along with the request\r\n        http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\r\n        \r\n        http.onreadystatechange = function() {//Call a function when the state changes.\r\n            if(http.readyState == 4 && http.status == 200) {\r\n\r\n                if( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\t\t\tif( data.type == 'fb' ){\r\n\t\t\t\t\t\tif( 'fb' in window.socialSignin_config ){\r\n\t\t\t\t\t\t\tif( 'result' in window.socialSignin_config.fb ){\r\n\t\t\t\t\t\t\t\twindow[window.socialSignin_config.fb.result](http.responseText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else if(data.type === 'google'){\r\n\t\t\t\t\t\tif( 'google' in window.socialSignin_config ){\r\n\t\t\t\t\t\t\tif( 'result' in window.socialSignin_config.google ){\r\n\t\t\t\t\t\t\t\twindow[window.socialSignin_config.google.result](http.responseText);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }else{\r\n            \tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\t\t\tif( ( 'console' in window.socialSignin_config ) && window.socialSignin_config.console == 1 ){\r\n\t\t\t\t\t\tconsole.log(http.responseText);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n            }\r\n        }\r\n        http.send(params);\r\n\t},\r\n\tstatusChangeCallback(response){\r\n\r\n\t\tconst _self = this;\r\n\r\n\t    if (response.status === 'connected') {\r\n\t        FB.api('/me?fields=email,name,first_name,last_name',\r\n\t\t        function (response) {\r\n\t\t        \tlet data = {\r\n\t\t        \t\tid : response.id,\r\n\t\t        \t\tfullname : response.first_name+' '+response.last_name,\r\n\t\t        \t\tfirst_name : response.first_name,\r\n\t\t        \t\tlast_name : response.last_name,\r\n\t\t        \t\temail : response.email,\r\n\t\t        \t\tavatar : 'http://graph.facebook.com/'+response.id+'/picture?type=square',\r\n\t\t        \t\ttype : 'fb'\r\n\t\t        \t}\r\n\t\t            _self.socialLogin(data);\r\n\t\t        }\r\n\t\t    );\r\n\t    } else if (response.status === 'not_authorized') {\r\n\t        if( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\t\tif( ( 'console' in window.socialSignin_config ) && window.socialSignin_config.console == 1 ){\r\n\t\t\t\t\tconsole.log('Not authorized');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t    } else {\r\n\t        if( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\t\tif( ( 'console' in window.socialSignin_config ) && window.socialSignin_config.console == 1 ){\r\n\t\t\t\t\tconsole.log(response.status);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t    }\r\n\t},\r\n\tcheckLoginState(){\r\n\t\tconst _self = this;\r\n\r\n\t    FB.getLoginStatus(function (response) {\r\n\t    \t_self.statusChangeCallback(response);\r\n\t    });\r\n\t}\r\n}\r\n\r\nsocialSignin.init();\r\n\r\nwindow.socialLogin = function(data){\r\n\tsocialSignin.socialLogin(data);\r\n}\r\n\r\nwindow.checkLoginState = function(){\r\n\tsocialSignin.checkLoginState();\r\n}\r\n\r\nwindow.googleUser = {}\r\n\r\n// -- google\r\nwindow.gstart = function(){\r\n\tvar auth2;\t\r\n\tgapi.load('auth2', function(){\r\n\r\n\t    // Retrieve the singleton for the GoogleAuth library and set up the client.\r\n\t    auth2 = gapi.auth2.init({\r\n\t        client_id: window.socialSignin_config.google.client_id,\r\n\t        cookiepolicy: 'single_host_origin'\r\n\t        // Request scopes in addition to 'profile' and 'email'\r\n\t        // scope: 'email'\r\n\t    });\r\n\t      \r\n\t    document.querySelectorAll('.socialSignin[data-type=\"google\"]').forEach(function(item,index){\r\n\t\t    auth2.attachClickHandler(item, {},\r\n\t\t        function(googleUser) {\r\n\r\n\t\t        \tlet name = googleUser.getBasicProfile().getName().split(' ');\r\n\t\t            let data = {\r\n\t\t        \t\tid : googleUser.getBasicProfile().getId(),\r\n\t\t        \t\tfullname : googleUser.getBasicProfile().getName(),\r\n\t\t        \t\tfirst_name : name[0],\r\n\t\t        \t\tlast_name : ( ( name.length > 1 ) ? name[1] : name[0] ),\r\n\t\t        \t\temail : googleUser.getBasicProfile().getEmail(),\r\n\t\t        \t\ttype : 'google',\r\n\t\t        \t\tavatar : ''\r\n\t\t        \t}\r\n\r\n\t\t        \tsocialSignin.socialLogin(data);\r\n\r\n\t\t        }, function(error) {\r\n\t\t\t\t\tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\t\t\t\t\tif( ( 'console' in window.socialSignin_config ) && window.socialSignin_config.console == 1 ){\r\n\t\t\t\t\t\t\tconsole.log(JSON.stringify(error, undefined, 2));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t        \t}\r\n\t        );\r\n\t    });\r\n\t    \r\n\t});\r\n}\r\n//--\r\n\r\nwindow.fbAsyncInit = function () {\r\n\tlet version = 'v4.0'\r\n\tif( typeof window.socialSignin_config != 'undefined' ){\r\n\t\tif( 'google' in window.socialSignin_config ){\r\n\t\t\tif( 'version' in window.socialSignin_config.fb ){\r\n\t\t\t\tversion = window.socialSignin_config.fb.version;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    FB.init({\r\n      appId      : window.socialSignin_config.fb.client_id,\r\n      cookie     : true,\r\n      xfbml      : true,\r\n      version    : version\r\n    });\r\n\r\n    socialSignin.fbSigninInit();\r\n};\r\n\r\n\r\n\r\n"]}